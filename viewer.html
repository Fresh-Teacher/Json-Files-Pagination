<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PDF Viewer</title>
  <style>
    #pdf-container {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.8);
      z-index: 9999;
    }

    #pdf-controls {
      position: absolute;
      top: 10px;
      left: 10px;
      color: #fff;
    }

    .pdf-button {
      margin-right: 5px;
      background-color: #428bca;
      border: none;
      color: #fff;
      padding: 5px 10px;
      cursor: pointer;
    }

    #pdf-canvas {
      max-width: 100%;
      max-height: 100%;
      margin: auto;
      display: block;
    }

    .footer {
      background-color: #f8f9fa;
      padding: 20px 0;
      text-align: center;
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="row">
      <div class="col-12 mb-4">
        <input type="text" id="searchInput" class="form-control" placeholder="Search...">
      </div>
    </div>

    <div class="row" id="itemContainer">
      <!-- Items will be dynamically populated here -->
    </div>

    <div id="pdf-container">
      <div id="pdf-controls">
        <button id="prev-button" class="pdf-button">&lt;</button>
        <button id="next-button" class="pdf-button">&gt;</button>
        <span id="page-numbers"></span>
        <button id="zoom-in-button" class="pdf-button">+</button>
        <button id="zoom-out-button" class="pdf-button">-</button>
        <button id="close-button" class="pdf-button">Close</button>
      </div>
      <canvas id="pdf-canvas"></canvas>
    </div>

    <div class="footer">
      <div class="container">
        <p>&copy; 2023 Fresh Teachers' App. All rights reserved. | Made with ❤️ by Fresh Teachers</p>
      </div>
    </div>

    <!-- Include the PDF.js library and dependencies -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.worker.min.js"></script>

    <script>
      // Sample data
      const items = [
      {
          title: 'Mathematics Textbook',
          description: 'A comprehensive guide to mathematics',
          price: 19.99,
          link: 'https://freshteacher.software/English P.7 Lesson Notes Term 1.pdf',
        },
        {
          title: 'Physics Workbook',
          description: 'Exercises and practice problems for physics',
          price: 14.99,
          link: 'https://freshteacher.software/wakisha Ent 2.pd',
        },
        {
          title: 'Chemistry Study Guide',
          description: 'Key concepts and explanations for chemistry',
          price: 12.99,
          link: 'https://freshteacher.software/wakisha Ent 1.pdf',
        },{
          title: 'Mathematics Textbook',
          description: 'A comprehensive guide to mathematics',
          price: 19.99,
          link: 'https://freshteacher.software/English P.7 Lesson Notes Term 1.pdf',
        },
        {
          title: 'Physics Workbook',
          description: 'Exercises and practice problems for physics',
          price: 14.99,
          link: 'https://freshteacher.software/wakisha Ent 2.pd',
        },
        {
          title: 'Chemistry Study Guide',
          description: 'Key concepts and explanations for chemistry',
          price: 12.99,
          link: 'https://freshteacher.software/wakisha Ent 1.pdf',
        },{
          title: 'Mathematics Textbook',
          description: 'A comprehensive guide to mathematics',
          price: 19.99,
          link: 'https://freshteacher.software/English P.7 Lesson Notes Term 1.pdf',
        },
        {
          title: 'Physics Workbook',
          description: 'Exercises and practice problems for physics',
          price: 14.99,
          link: 'https://freshteacher.software/wakisha Ent 2.pd',
        },
        {
          title: 'Chemistry Study Guide',
          description: 'Key concepts and explanations for chemistry',
          price: 12.99,
          link: 'https://freshteacher.software/wakisha Ent 1.pdf',
        },
      ];

      // Function to initialize the app
      function initializeApp() {
        renderItems(items);
        addSearchFunctionality();
      }

      // Function to render the items
      function renderItems(items) {
        const itemContainer = document.getElementById('itemContainer');
        itemContainer.innerHTML = '';

        for (const item of items) {
          const card = document.createElement('div');
          card.classList.add('card', 'mb-3');

          const cardBody = document.createElement('div');
          cardBody.classList.add('card-body');

          const cardTitle = document.createElement('h5');
          cardTitle.classList.add('card-title');
          cardTitle.textContent = item.title;

          const cardDescription = document.createElement('p');
          cardDescription.classList.add('card-text');
          cardDescription.textContent = item.description;

          const cardPrice = document.createElement('p');
          cardPrice.classList.add('card-text');
          cardPrice.textContent = `Price: $${item.price.toFixed(2)}`;

          const cardLink = document.createElement('a');
          cardLink.classList.add('btn', 'btn-primary');
          cardLink.href = item.link;
          cardLink.target = '_blank';
          cardLink.textContent = 'Download';

          const previewButton = document.createElement('button');
          previewButton.classList.add('btn', 'btn-secondary', 'ml-2');
          previewButton.textContent = 'Preview';
          previewButton.addEventListener('click', () => {
            openPreview(item.link);
          });

          cardBody.appendChild(cardTitle);
          cardBody.appendChild(cardDescription);
          cardBody.appendChild(cardPrice);
          cardBody.appendChild(cardLink);
          cardBody.appendChild(previewButton);
          card.appendChild(cardBody);
          itemContainer.appendChild(card);
        }
      }

      // Function to open the preview of the PDF
      function openPreview(url) {
        const container = document.getElementById('pdf-container');
        const closeButton = document.getElementById('close-button');

        container.style.display = 'block';
        loadPDF(url);

        closeButton.addEventListener('click', () => {
          closePreview();
        });
      }

      // Function to close the PDF preview
      function closePreview() {
        const container = document.getElementById('pdf-container');
        container.style.display = 'none';
      }

      // Function to load the PDF and display it in the preview
      function loadPDF(url) {
  const canvas = document.getElementById('pdf-canvas');
  const prevButton = document.getElementById('prev-button');
  const nextButton = document.getElementById('next-button');
  const zoomInButton = document.getElementById('zoom-in-button');
  const zoomOutButton = document.getElementById('zoom-out-button');
  const pageNumbers = document.getElementById('page-numbers');
  let currentZoom = 1;

  pdfjsLib.getDocument(url).promise.then(pdf => {
    let currentPage = 1;
    let totalPages = pdf.numPages;

    prevButton.addEventListener('click', () => {
      if (currentPage > 1) {
        currentPage--;
        renderPage(currentPage);
      }
    });

    nextButton.addEventListener('click', () => {
      if (currentPage < totalPages) {
        currentPage++;
        renderPage(currentPage);
      }
    });

    zoomInButton.addEventListener('click', () => {
      currentZoom += 0.1;
      renderPage(currentPage);
    });

    zoomOutButton.addEventListener('click', () => {
      currentZoom -= 0.1;
      renderPage(currentPage);
    });

    function renderPage(pageNumber) {
      pdf.getPage(pageNumber).then(page => {
        const viewport = page.getViewport({ scale: currentZoom });
        const context = canvas.getContext('2d');

        canvas.width = viewport.width;
        canvas.height = viewport.height;

        page.render({
          canvasContext: context,
          viewport: viewport,
        });

        pageNumbers.textContent = `Page ${pageNumber} of ${totalPages}`;
      });
    }

    renderPage(currentPage);
  }).catch(error => {
    console.error('Error loading PDF:', error);
    closePreview();
  });
}


      // Function to add search functionality
      function addSearchFunctionality() {
        const searchInput = document.getElementById('searchInput');
        const itemContainer = document.getElementById('itemContainer');

        searchInput.addEventListener('input', () => {
          const searchValue = searchInput.value.toLowerCase();
          const filteredItems = items.filter(item => {
            return item.title.toLowerCase().includes(searchValue) ||
              item.description.toLowerCase().includes(searchValue);
          });

          renderItems(filteredItems);
        });
      }

      // Initialize the app
      initializeApp();
    </script>
  </div>
</body>

</html>
